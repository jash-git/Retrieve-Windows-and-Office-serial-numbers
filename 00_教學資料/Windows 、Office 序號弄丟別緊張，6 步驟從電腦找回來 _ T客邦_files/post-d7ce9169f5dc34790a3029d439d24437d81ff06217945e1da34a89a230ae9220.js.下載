$(function(){var t={};$(".fb-comments").each(function(e,n){var o=$(n),r=o.data("href"),c=o.data("resource-type"),i=o.data("resource-id");t[r]={type:c,id:i}});var e=function(t){t&&t.type&&t.id&&$.ajax({type:"PUT",url:"/facebook_comments",data:{resource_type:t.type,resource_id:t.id}})},n=function(n){var o=t[n.href];e(o)};window.initFBCommentEvents=function(t){t.Event.subscribe("comment.create",n),t.Event.subscribe("comment.remove",n)}}),$(function(){$("#expand-rules").click(function(t){t.preventDefault(),$("#full-rules").show(),$("#short-rules").hide()})}),$(function(){$(".push").on("click",function(){return $.post($(this).attr("data-url")),!1}),$(".pushed").on("click",function(){return window.alert("\u4f60\u5df2\u7d93\u63a8\u904e\u4e86\u5594\uff01"),!1})}),function(){var t={getSelection:function(){var t=this.jquery?this[0]:this;return("selectionStart"in t&&function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}||document.selection&&function(){t.focus();var e=document.selection.createRange();if(null===e)return{start:0,end:t.value.length,length:0};var n=t.createTextRange(),o=n.duplicate();return n.moveToBookmark(e.getBookmark()),o.setEndPoint("EndToStart",n),{start:o.text.length,end:o.text.length+e.text.length,length:e.text.length,text:e.text}}||function(){return null})()},replaceSelection:function(){var t=this.jquery?this[0]:this,e=arguments[0]||"";return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+e+t.value.substr(t.selectionEnd,t.value.length),this}||document.selection&&function(){return t.focus(),document.selection.createRange().text=e,this}||function(){return t.value+=e,jQuery(t)})()}};jQuery.each(t,function(t){jQuery.fn[t]=this})}(),$(function(){$(".comment-emoji").on("click",function(){var t=$(this).text(),e=$(".comment-textarea");return e.replaceSelection(t,!0),e.focus(),!1})}),$(function(){$(".comment-quote").on("click",function(){let t=$(this).data("url");return $.ajax({url:t,dataType:"json",success:function(t){$(".comment-textarea").val("\u203b \u5f15\u8ff0\u300a"+t.nickname+"\u300b\u7684\u7559\u8a00\uff1a\n> "+t.content),$(".comment-textarea").focus()},error:function(){alert("\u5f15\u7528\u56de\u8986\u5931\u6557\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\uff0c\u8b1d\u8b1d\uff01")}}),!1})}),$(function(){$("a.favo-post, a.favo-delete").on("click",function(){var t=$(this).attr("class").match(/favo-(post|put|delete)/i)[1].toLowerCase();return $.post($(this).attr("data-url"),"_method="+t,null,"script"),!1})}),/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
function(t,e,n){function o(t){return t}function r(t){return decodeURIComponent(t.replace(c," "))}var c=/\+/g;t.cookie=function(c,i,a){if(i!==n&&!/Object/.test(Object.prototype.toString.call(i))){if(a=t.extend({},t.cookie.defaults,a),null===i&&(a.expires=-1),"number"==typeof a.expires){var u=a.expires,s=a.expires=new Date;s.setDate(s.getDate()+u)}return i=String(i),e.cookie=[encodeURIComponent(c),"=",a.raw?i:encodeURIComponent(i),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var l,d=(a=i||t.cookie.defaults||{}).raw?o:r,f=e.cookie.split("; "),m=0;l=f[m]&&f[m].split("=");m++)if(d(l.shift())===c)return d(l.join("="));return null},t.cookie.defaults={},t.removeCookie=function(e,n){return null!==t.cookie(e,n)&&(t.cookie(e,null,n),!0)}}(jQuery,document),function(){$(function(){var t,e,n,o,r,c;1===(o=$("#auto-refresh")).length&&(n=o.data("interval"),e=n>0?60*n*1e3:12e3,c=void 0,t=$("span.js-auto-refresh-action"),r=$("span.js-auto-refresh-status"),$.cookie("_auto_refresh")&&(c=setTimeout(function(){return location.reload()},e),t.html("\u95dc\u9589"),r.html("\u5df2\u958b\u555f\u81ea\u52d5\u66f4\u65b0")),o.click(function(){var n;return n={path:"/",domain:document.domain,secure:!1},$.cookie("_auto_refresh")?($.cookie("_auto_refresh",null,n),clearTimeout(c),t.html("\u6253\u958b"),r.html("\u81ea\u52d5\u66f4\u65b0\u95dc\u9589\u4e2d")):($.cookie("_auto_refresh","1",n),c=setTimeout(function(){return location.reload()},e),t.html("\u95dc\u9589"),r.html("\u5df2\u958b\u555f\u81ea\u52d5\u66f4\u65b0")),!1}))})}.call(this),$(function(){var t=$(".float-top"),e=$(".float-top-share");$(window).scroll(function(){$(this).scrollTop()>100?(t.addClass("fixed-top"),e.css("height","45px")):(t.removeClass("fixed-top"),e.css("height","0px"))})}),$(function(){var t=$(".twitter-tweet"),e=document.getElementsByTagName("script")[0];if(!(t.length<=0)){var n=document.createElement("script");n.type="text/javascript",n.src="https://platform.twitter.com/widgets.js",n.charset="UTF-8",n.async=!0,e.parentNode.insertBefore(n,e)}}),$(function(){$(".copy_url").on("click",function(){post_url=$(this).next("input.post_url"),post_url.prop("type","text"),post_url.select(),document.execCommand("copy"),post_url.prop("type","hidden")})}),document.addEventListener("DOMContentLoaded",function(){function t(){let t=document.querySelector("#newsletter_input").value;var e=new Date;0==t.search(c)?(console.log(t.search(c)),console.log(t),console.log(e),$.ajax({type:"GET",url:"https://script.google.com/macros/s/AKfycbzgtTVYc76s9CU8-Vt4dnPJTIKlQqAp13EZS37ltZV5VQHNNAXq/exec",data:{time:e,email:t},success:function(t){"\u6210\u529f"==t?(r.style.display="none",o.style.display="block"):(r.style.display="none",n.style.display="block")}})):alert("\u4f60\u6240\u8f38\u5165\u7684 email \u4e0d\u7b26\u5408\u683c\u5f0f\uff01")}let e=document.querySelector("#subscribebtn");var n=document.getElementById("wrong"),o=document.getElementById("correct"),r=document.getElementById("submain"),c=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;e&&e.addEventListener("click",t)});